<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}{{ project_name }}{% endblock %}</title>
    <style>
        body { font-family: sans-serif; line-height: 1.6; margin: 2em auto; padding: 0 1em; color: #333; background-color: #fdfdfd; }
        header { border-bottom: 2px solid #eee; margin-bottom: 2em; padding-bottom: 1em; }
        .header-content { display: flex; justify-content: space-between; align-items: center; }
        header a { text-decoration: none; color: #007bff; }
        header .site-title { font-size: 1.5em; font-weight: bold; color: #333; }
        main { margin-bottom: 2em; }
        footer { font-size: 0.8em; text-align: right; color: #777; border-top: 1px solid #eee; padding-top: 1em; }
        button, .button-link { padding: 0.5em 1em; cursor: pointer; border-radius: 4px; border: 1px solid #ccc; background-color: #f0f0f0; text-decoration: none; color: #333; display: inline-block; }
        .button-link-primary { background-color: #007bff; color: white; border-color: #007bff; }
        ul { list-style: none; padding: 0; }
        li { background: #fff; border: 1px solid #ddd; padding: 0.75em 1.25em; margin-bottom: 0.5em; display: flex; justify-content: space-between; align-items: center; border-radius: 4px;}
        .actions a { margin-left: 1em; }
        /* „É°„ÉÉ„Çª„Éº„Ç∏ */
        .messages { margin-bottom: 1.5rem; }
        .message {
            padding: 0.75rem 1.25rem;
            border: 1px solid transparent;
            border-radius: 4px;
            margin-bottom: 0.5rem;
        }
        .message-success { color: #155724; background-color: #d4edda; border-color: #c3e6cb; }
        .message-info { color: #0c5460; background-color: #d1ecf1; border-color: #bee5eb; }
        .message-warning { color: #856404; background-color: #fff3cd; border-color: #ffeeba; }
        .message-error { color: #721c24; background-color: #f8d7da; border-color: #f5c6cb; }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <a href="{% url 'subscriptions:queryset_list' %}" class="site-title">üì∞ {{ project_name }}</a>
            <span>
                {% if user.is_authenticated %}
                    {{ user.get_display_name }} |
                    <a href="{% url 'users:user_settings' %}">Ë®≠ÂÆö</a> |
                    <form action="{% url 'users:logout' %}" method="post" style="display: inline;">
                        {% csrf_token %}
                        <button type="submit" style="background: none; border: none; color: #007bff; cursor: pointer; padding: 0; text-decoration: underline;">„É≠„Ç∞„Ç¢„Ç¶„Éà</button>
                    </form>
                {% else %}
                    <a href="{% url 'users:login' %}">„É≠„Ç∞„Ç§„É≥</a>
                {% endif %}
            </span>
        </div>
    </header>

    <main>
      {# „É°„ÉÉ„Çª„Éº„Ç∏Ë°®Á§∫„Ç®„É™„Ç¢ #}
      <div id="messages-container" class="messages">
        {% if messages %}
          {% for message in messages %}
          <div class="message message-{{ message.tags }}">
            {{ message }}
          </div>
          {% endfor %}
        {% endif %}
      </div>
      {% block content %}
      {% endblock %}
    </main>

    <footer>
        <p>&copy; 2025 YYNET </p>
    </footer>

    <script>
        /**
         * ÁîªÈù¢„Å´„É°„ÉÉ„Çª„Éº„Ç∏„ÇíÂãïÁöÑ„Å´ËøΩÂä†Ë°®Á§∫„Åô„ÇãÂÖ±ÈÄöÈñ¢Êï∞
         * @param {string} message - Ë°®Á§∫„Åô„Çã„É°„ÉÉ„Çª„Éº„Ç∏
         * @param {string} level - „É°„ÉÉ„Çª„Éº„Ç∏„É¨„Éô„É´ (success, info, warning, error)
         */
        function showMessage(message, level) {
            const container = document.getElementById('messages-container');
            if (!container) return;
            const msgDiv = document.createElement('div');
            msgDiv.className = `message message-${level}`;
            msgDiv.textContent = message;
            container.appendChild(msgDiv);
        }
    </script>
    {% block extra_js %}{% endblock %}
</body>
</html>
